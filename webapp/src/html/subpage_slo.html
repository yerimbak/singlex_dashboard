<!DOCTYPE html>
<html lang="ko">

<head>
    @@include('./include/head.html')
</head>

<body>
    <!--  data-theme="dark" -->
    <div class="wrap">
        @@include('./include/header_subpage.html')
        <div class="content" data-content="new">
            <div class="top-area type-sub">
                <!-- 2022-07-11 태그 수정 -->
                <div class="btn-sort total">
                    <span class="status good">Total tenant</span>
                    <span class="count">2</span>
                </div>
                <div class="btn-sort good">
                    <span class="tit">Good <small>(99% 이상)</small></span>
                    <span class="count">1</span>
                </div>
                <div class="btn-sort warn">
                    <span class="tit">Warning <small>(70~99% 미만)</small></span>
                    <span class="count">1</span>
                </div>
                <div class="btn-sort bad">
                    <span class="tit">Bad <small>(70% 미만)</small></span>
                    <span class="count">0</span>
                </div>
                <!-- // 2022-07-11 태그 수정 -->
            </div>
            <div class="content-tit">SLO by Indicator</div>
            <!-- 2022-07-21 아코디언 구조 수정 -->
            <div class="main-area-half">
                <div class="main-area accordion">
                    <div class="sort-box">
                        <div class="type-accordion one">
                            <div class="accordion-wrap good">
                                <!-- 2022-06-27 아코디언 구조 수정 (아코디언 클릭영역 수정) -->
                                <div class="accordion-box">
                                    <!-- 2022-06-29 subpage 아코디언 status 수정 -->
                                    <button class="accordion-tit sub">
                                        <span class="svc-name">LG 이노텍</span>
                                        <!-- <span class="svc-status">
                                      <span class="status good">3</span>
                                      <span class="status warn">1</span>
                                      <span class="status bad">0</span>
                                  </span> -->
                                        <span class="svc-status">
                                            <span class="status good">Satisfied : <i>7</i></span>
                                            <span class="status bad">Unsatisfied : <i>2</i></span>
                                        </span>
                                    </button>
                                    <button type="button" class="btn-popup cl-black">Health check Report 팝업 열기</button>
                                </div>
                                <div class="accordion-cont">
                                    <!-- 2022-06-29 하나의 범례만 있는 경우 only 클래스 추가 -->
                                    <div class="legend-area only">
                                        <div class="legend">
                                            Error Budget 범례 :
                                            <span class="good">50% 이상 잔여</span>
                                            <span class="warn">20~50% 미만 잔여</span>
                                            <span class="bad">20% 미만 잔여</span>
                                        </div>
                                    </div>
                                    <ul class="slo">
                                        <li>
                                            <p class="slo-name">Availability - 신규등록시 존재여부체크</p>
                                            <div class="slo-info">
                                                <p class="status good">Satisfied <small>(99.51%)</small></p>
                                                <p class="error-budget">Error Budget</p>
                                                <p class="residual up good">34분 (00%)</p>
                                                <!-- 2022-06-24 data-modal 속성 추가 -->
                                                <div class="btn">
                                                    <button type="button" class="modal-open tooltip"
                                                        data-modal="modal1">상세정보</button>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <p class="slo-name">Availability - 신규등록시 존재여부체크</p>
                                            <div class="slo-info">
                                                <p class="status good">Satisfied <small>(99.51%)</small></p>
                                                <p class="error-budget">Error Budget</p>
                                                <p class="residual up good">34분 (00%)</p>
                                                <!-- 2022-06-24 data-modal 속성 추가 -->
                                                <div class="btn">
                                                    <button type="button" class="modal-open tooltip"
                                                        data-modal="modal1">상세정보</button>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <p class="slo-name">Availability - 신규등록시 존재여부체크</p>
                                            <div class="slo-info">
                                                <p class="status bad">Unsatisfied <small><small>(99.51%)</small></small></p>
                                                <p class="error-budget">Error Budget</p>
                                                <p class="residual up good">34분 (00%)</p>
                                                <!-- 2022-06-24 data-modal 속성 추가 -->
                                                <div class="btn">
                                                    <button type="button" class="modal-open tooltip"
                                                        data-modal="modal1">상세정보</button>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="sort-box">
                        <div class="type-accordion one">
                            @@include('./include/accordion_one_service02.html')
                        </div>
                    </div>
                    <div class="sort-box">
                        <div class="type-accordion one">
                            @@include('./include/accordion_one_service02.html')
                        </div>
                    </div>
                </div>
                <div class="main-area accordion">
                    <div class="sort-box">
                        <div class="type-accordion one">
                            @@include('./include/accordion_one_service02.html')
                        </div>
                    </div>
                    <div class="sort-box">
                        <div class="type-accordion one">
                            @@include('./include/accordion_one_service02.html')
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="mode">
            <input type="checkbox" id="mode" checked>
            <label for="mode">라이트모드</label>
        </div>
    </div>

    <div id="modal1" class="modal-wrap information">
        <strong class="tit">상세정보</strong>
        <dl class="table">
            <dt>Indicator</dt>
            <dd>Latency - 결재선 찾기</dd>
            <dt>SLO</dt>
            <dd>99%</dd>
            <dt>State</dt>
            <dd class="bad">Unsatisfied</dd>
            <dt>Error Budget</dt>
            <dd>67’</dd>
            <dt>잔여 Error Budget</dt>
            <dd class="warn">24’</dd>
            <dt>Details</dt>
            <dd>원인을 상세하게 작성합니다.</dd>
        </dl>
        <button type="button" class="btn-close">닫기</button>
    </div>

    <script>
        // popup
        $(document).on({
            click: function () {
                const popupData = $(this).data("modal");
                const thisPopup = $("#" + popupData);
                const position = $(this).offset();

                if (thisPopup.hasClass("information")) {
                    $(".modal-wrap").hide();
                    thisPopup.show();
                    thisPopup.css("top", (position.top) - 270 + "px");
                    thisPopup.css("left", (position.left) - 420 + "px");
                    thisPopup.focus();
                    return;
                }

                $(".modal-wrap").hide();
                thisPopup.show();
                thisPopup.css("top", (position.top) + 37 + "px");
                thisPopup.css("left", (position.left) - 250 + "px");
                thisPopup.focus();
            }
        }, ".modal-open")

        // popup 닫기 이벤트
        $(document).on({
            click: function () {
                const popup = $(this).parents(".modal-wrap");
                popup.hide();
            }
        }, ".modal-wrap .btn-close")

        // 외부영역 클릭 시 popup 닫기
        $(document).mouseup(function (e) {
            const modalWrap = $('.modal-wrap');
            if (!modalWrap.is(e.target) && modalWrap.has(e.target).length === 0) {
                modalWrap.hide();
            }
        });

        // accordion
        $(document).on({
            click: function () {
                const accordionWrap = $(this).closest(".accordion-wrap");

                if (accordionWrap.hasClass("on")) {
                    accordionWrap.removeClass("on")
                } else {
                    accordionWrap.addClass("on")
                }
            }
        }, ".accordion-tit")

        // switch
        $(document).on({
            click: function () {
                const switchCheck = $(".mode input[type='checkbox']");
                const switchTxt = $(".mode label");
                const body = $("body");

                if (switchCheck.is(":checked")) {
                    switchTxt.html("라이트모드")
                    body.attr("data-theme", "")
                } else {
                    switchTxt.html("다크<br>모드")
                    body.attr("data-theme", "dark")
                }
            }
        }, ".mode")
    </script>
</body>

</html>